\documentclass{oci}
\usepackage[utf8]{inputenc}
\usepackage{lipsum}
\usepackage{multirow}
\usepackage[table,xcdraw]{xcolor}

\title{Territorios}
\codename{territorios}

\begin{document}
\begin{problemDescription}
%  Terry es fanática del Risk.
%  Risk es un popular juego de estrategia, cuyo objetivo es completar una misión
%  secreta dada a cada jugador conquistando los \emph{territorios} enemigos.
%  No lo confundan con imitaciones, Risk es el original y único juego de
%  estrategia en el que puedes conquistar el mundo.
%
%  El tablero del juego consiste en un mapa 
%  %del mundo donde los continentes están
%  %divididos en territorios.
%  dividido en territorios.
%  Dos territorios son adyacentes si existe una frontera entre ellos. 
%  %o si hay una línea punteada que los une lo que significa que es posible navegar entre ellos a través del océano.
%  Durante el juego, un territorio es controlado por a lo más un jugador %a la vez
%  y esto se representa poniendo %una o más 
%  fichas del color de ese jugador sobre el territorio. 

  Terry es fanática del popular juego de estrategia \emph{Risk}, el original 
  y único juego de estrategia en el que puedes conquistar el mundo. No lo confundan con imitaciones.

  Las reglas del Risk son las siguientes.
  El tablero del juego consiste en un mapa dividido en territorios.
  Dos territorios son adyacentes si existe una frontera entre ellos. 
  %o si hay una línea punteada que los une lo que significa que es posible navegar entre ellos a través del océano.
  Durante el juego, un territorio es controlado por a lo más un jugador %a la vez
  y esto se representa poniendo %una o más 
  fichas del color de ese jugador sobre el territorio. 
  En cada turno un jugador puede decidir atacar los territorios enemigos.
  Para realizar un ataque, un jugador debe escoger uno de sus territorios y
  atacar algún territorio adyacente a él.
  Si el ataque es exitoso, el jugador atacante elimina todas las fichas enemigas
  del territorio y coloca las suyas en este nuevo territorio conquistado.
  Una vez que un territorio es conquistado el jugador debe esperar al siguiente
  turno para poder atacar desde él.
  No obstante, en el mismo turno puede seguir atacando desde los territorios que
  ya controlaba.

  Terry está obsesionada con el Risk y pasa tardes enteras analizando
  nuevas estrategias e inventando nuevas reglas.
  En este momento está preocupada de saber cuántos territorios podría
  conquistar si pudiera jugar $K$ turnos seguidos.
  Para eso supone que no tiene oponentes y que comienza el juego controlando una
  cantidad $T$ de territorios.
  En su primer turno Terry puede conquistar todos los territorios adyacentes a
  los territorios iniciales.
  En su segundo turno puede atacar desde los territorios conquistados en
  el primer turno y conquistar todos los territorios adyacentes a alguno de
  ellos.
  En su tercer turno puede expandirse a partir de los territorios
  conquistados en el segundo turno y así sucesivamente hasta completar los $K$
  turnos.
%  Suponiendo que en cada turno conquista todos los territorios posibles en ese turno, 
%  a Terry le gustaría saber con
%  cuantos territorios termina después del turno $K$.
  
%  Por ejemplo, suponga un tablero compuesto por 9 territorios con la siguiente forma.
%  \begin{center}
%\input{mapa.pspdftex}
%\end{center}
Por ejemplo, la siguiente figura muestra dos turnos seguidos de Terry en un tablero con $9$ territorios
suponiendo que Terry comienza controlando sólo el territorio $1$.
\begin{center}
\begin{tabular}{|c|c|c|}
\ \ \ \  \scalebox{0.9}{\input{mapa1-1.pspdftex}} \ \ \ \  & \ \ \ \  \scalebox{0.9}{\input{mapa1-2.pspdftex}} \ \ \ \  & \ \ \ \  \scalebox{0.9}{\input{mapa1-3.pspdftex}} \ \ \ \  \\
Posición inicial & Después del primer turno & Después del segundo turno
\end{tabular}\\ \medskip

{\bf Figura 1}: Ejemplo de juego en 2 turnos desde un territorio inicial.
\end{center}
% En el ejemplo, inicialmente Terry solo tiene el territorio $1$.
En su primer turno Terry puede conquistar tanto
el territorio $2$ como el territorio $3$ dado que ambos son adyacentes a $1$, por lo que luego
de su primer turno Terry controla los territorios $1$, $2$ y $3$. 
En su segundo turno puede conquistar los territorios $4$ y $5$, que son adyacentes al territorio $2$,
y el territorio $6$, que es adyacente al territorio $3$. Entonces, luego de dos turnos
Terry puede conquistar un total de $6$ territorios. 
%(Este caso corresponde al tercer ejemplo de entrada de más abajo.)

El siguiente ejemplo muestra dos turnos del juego de Terry si comienza controlando los territorios $5$, $7$ y $8$.
\begin{center}
\begin{tabular}{|c|c|c|}
\ \ \ \  \scalebox{0.9}{\input{mapa2-1.pspdftex}} \ \ \ \  & \ \ \ \  \scalebox{0.9}{\input{mapa2-2.pspdftex}} \ \ \ \  & \ \ \ \  \scalebox{0.9}{\input{mapa2-3.pspdftex}} \ \ \ \  \\
Posición inicial & Después del primer turno & Después del segundo turno
\end{tabular}\\ \medskip

{\bf Figura 2}: Ejemplo de juego en 2 turnos desde tres territorios iniciales.
\end{center}
En este caso, en dos turnos Terry puede conquistar los $9$ territorios del mapa.
%(Este caso corresponde al cuarto ejemplo de entrada de más abajo.)

Dada una descripción del mapa y los territorios que Terry controla inicialmente, tu tarea
es construir un programa que determine cuántos territorios puede conquistar Terry si juega $K$ turnos seguidos.
\end{problemDescription}

\begin{inputDescription}
  La entrada consiste en varias líneas.
%
  La primera línea contiene tres números enteros $N$, $T$ y $K$ donde
  $N$ es el número total de territorios en el tablero,
	$T$ es la cantidad de territorios que Terry controla inicialmente, y
	$K$ es la cantidad de turnos seguidos que Terry quiere jugar.
	La segunda línea contiene $T$ enteros que indican cuáles son los territorios
  que Terry controla inicialmente.
	
	Después de esas líneas vienen varias líneas que describen el tablero.
	La primera de estas líneas contiene un entero $A$ que indica la cantidad de 
	pares de territorios adyacentes en el mapa.
	Las siguientes $A$ líneas contienen cada una un par de enteros distintos $u$ y $v$
	que indican que el territorio $u$ y el territorio $v$ son adyacentes.
	
	% Se asegura que siempre se cumple con:
  Se garantiza que siempre se cumplirán las siguientes restricciones:
	\begin{itemize}
	\item $2 \le N \le 1\,000$, \ $1 \le T\le N$, \ $1 \le K\le 999$,\  $1 \le A \le 10\,000$.
	\end{itemize}

  Abajo se muestran varios ejemplos de entradas posibles. El tercer ejemplo corresponde al
  juego en la Figura 1, mientras que el cuarto ejemplo corresponde al juego en la Figura 2.



%  La entrada consiste en varias líneas.
%
%  La primera línea contiene cuatro números $N$, $T$ y $K$.
%  $N$ es el número de territorios en el tablero,
%  $E$ es la cantidad de pares de territorios
%  adyacentes,
%  $K$ es el número turnos que Terry quiere evaluar y
%  $T$ es el número de territorios con el cual Terry comienza
%  el juego.
%  Cada territorio es identificado con un número entre 1 y $N$.
%
%($1 \le N \le 1\,000$) 
%($1 \le E \le 10\,000$)
%($1 \le M \le 999$)
%
%  Las siguientes $E$ líneas describen pares de territorios adyacentes.
%  Cada línea contiene un par de enteros distintos $u$ y $v$ ($1\leq u,v\leq N$),
%  indicando que el territorio $u$ es adyacente al $v$.
%
%  La última línea contiene $T$ enteros, que corresponden a los territorios
%  controlados por Terry al principio del juego.
%
  % TODO poner una foto o un dibujo vectorial de parte del tablero y explicar--
  % hacer uno de los samples basado en la figura.
\end{inputDescription}

\begin{outputDescription}
  La salida consiste en una única línea con un número indicando la cantidad total
  de territorios con los que finaliza Terry después de $K$ turnos.
  Notar que este número incluye los territorios que poseía al inicio del juego.
\end{outputDescription}

\begin{scoreDescription}
  \score{15} Se probarán varios casos donde $T=1$ (solo un territorio inicial) y
  $K=1$ (solo un turno).
  % y los 
%  están dispuestos en una cadena, es decir, el territorio $i$
%  es adyacente solo con el territorio $i-1$ y el $i+1$, salvo el primer
%  territorio que solo es adyacente con el segundo y el último que solo es
%  adyacente con el penúltimo 
  \score{20} Se probarán varios casos donde $T=1$ y los territorios forman una
  línea, en donde el territorio $1$ es adyacente al territorio $2$, el
  territorio $2$ es adyacente al territorio $3$, y así hasta el territorio $N$.
  El segundo ejemplo abajo cumple estas condiciones.
  % A diferencia del caso anterior $K$ puede ser mayor a $1$.
  % El segundo ejemplo abajo cumple estas condiciones.
%  \score{30} Se probarán varios casos donde $T=1$, $K=1$, y además los
%  territorios están dispuestos en una cadena, es decir, el territorio $i$
%  es adyacente solo con el territorio $i-1$ y el $i+1$, salvo el primer
%  territorio que solo es adyacente con el segundo y el último que solo es
%  adyacente con el penúltimo (como en el primer caso de ejemplo más abajo).
  \score{30} Se probarán varios casos donde $T=1$ y sin
  restricciones adicionales.
  \score{35} Se probarán varios casos donde $T$ puede ser mayor que $1$ y sin restricciones
  adicionales.
\end{scoreDescription}

\begin{sampleDescription}
\sampleIO{sample-1}
\sampleIO{sample-1b}
\sampleIO{sample-2}
\sampleIO{sample-3}
\end{sampleDescription}

\end{document}
